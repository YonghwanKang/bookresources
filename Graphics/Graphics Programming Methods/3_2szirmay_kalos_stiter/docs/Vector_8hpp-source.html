<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Vector.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc2 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Vector.hpp</h1><a href="Vector_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#pragma once</span>
00002 <span class="preprocessor"></span>
00003 <span class="preprocessor">#include "<a class="code" href="globals_8hpp.html">globals.hpp</a>"</span>
00004 <span class="comment"></span>
00005 <span class="comment">//! Implements data structure and operations for 3 floating point variables</span>
00006 <span class="comment">//! Intented to use for 3D operations but suitable for RGB-represented color</span>
00007 <span class="comment">//! also</span>
<a name="l00008"></a><a class="code" href="classVector.html">00008</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="classVector.html">Vector</a> {
00009 <span class="keyword">public</span>:<span class="comment"></span>
00010 <span class="comment">        //!Vector is also used for storing colours</span>
00011 <span class="comment">        //!data can be accessed through various aliases</span>
00012 <span class="comment"></span>        <span class="keyword">union</span>{
<a name="l00013"></a><a class="code" href="classVector.html#m0">00013</a>                 <span class="keywordtype">float</span> <a class="code" href="classVector.html#m0">v</a>[3];
<a name="l00014"></a><a class="code" href="classVector.html#m3">00014</a>                 <span class="keyword">struct</span>{ <span class="keywordtype">float</span> <a class="code" href="classVector.html#m1">x</a>; <span class="keywordtype">float</span> <a class="code" href="classVector.html#m2">y</a>; <span class="keywordtype">float</span> <a class="code" href="classVector.html#m3">z</a>; };
<a name="l00015"></a><a class="code" href="classVector.html#m4">00015</a>                 <span class="keyword">struct</span>{ <span class="keywordtype">float</span> <a class="code" href="classVector.html#m4">r</a>; <span class="keywordtype">float</span> <a class="code" href="classVector.html#m5">g</a>; <span class="keywordtype">float</span> <a class="code" href="classVector.html#m6">b</a>; };
00016                 };
00017 
00018         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#p0">BLACK</a>;
00019 
<a name="l00020"></a><a class="code" href="classVector.html#a0">00020</a>         <a class="code" href="classVector.html#a0">Vector</a>(){};
00021 
<a name="l00022"></a><a class="code" href="classVector.html#a1">00022</a>         <a class="code" href="classVector.html#a0">Vector</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
00023         {
00024                 <a class="code" href="classVector.html#a2">Set</a>(x,y,z);
00025         }
00026 
<a name="l00027"></a><a class="code" href="classVector.html#a2">00027</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a2">Set</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
00028         {
00029                 <a class="code" href="classVector.html#m0">v</a>[0] = x; <a class="code" href="classVector.html#m0">v</a>[1] = y; <a class="code" href="classVector.html#m0">v</a>[2] = z;
00030         }
00031 
<a name="l00032"></a><a class="code" href="classVector.html#a3">00032</a>         <span class="keywordtype">bool</span> <a class="code" href="classVector.html#a3">NearEqual</a> (<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; a)<span class="keyword"> const </span>{
00033                 <span class="keywordflow">return</span> fabs(a.<a class="code" href="classVector.html#m1">x</a> - x) &lt; <a class="code" href="globals_8hpp.html#a0">EPSILON</a> &amp;&amp; fabs(a.<a class="code" href="classVector.html#m2">y</a> - y) &lt; <a class="code" href="globals_8hpp.html#a0">EPSILON</a> &amp;&amp; fabs(a.<a class="code" href="classVector.html#m3">z</a> - z) &lt; <a class="code" href="globals_8hpp.html#a0">EPSILON</a>;
00034         }
00035 <span class="comment"></span>
00036 <span class="comment">        //! Clip values to the [0.0f, 1.0f] closed interval</span>
<a name="l00037"></a><a class="code" href="classVector.html#a4">00037</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a4">ClipToUnitInterval</a>() {
00038                 <a class="code" href="classVector.html#m0">v</a>[0] = <a class="code" href="globals_8hpp.html#a5">MIN</a>(<a class="code" href="globals_8hpp.html#a6">MAX</a>(v[0], 0.0f), 1.0f);
00039                 <a class="code" href="classVector.html#m0">v</a>[1] = <a class="code" href="globals_8hpp.html#a5">MIN</a>(<a class="code" href="globals_8hpp.html#a6">MAX</a>(v[1], 0.0f), 1.0f);
00040                 <a class="code" href="classVector.html#m0">v</a>[2] = <a class="code" href="globals_8hpp.html#a5">MIN</a>(<a class="code" href="globals_8hpp.html#a6">MAX</a>(v[2], 0.0f), 1.0f);
00041         }
00042 
<a name="l00043"></a><a class="code" href="classVector.html#a5">00043</a>         <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a5">operator-</a>()<span class="keyword"> const</span>
00044 <span class="keyword">        </span>{
00045                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a>(-v[0], -v[1], -v[2]);
00046         }
00047 
<a name="l00048"></a><a class="code" href="classVector.html#a6">00048</a>         <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a6">operator+</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; addOperand)<span class="keyword"> const</span>
00049 <span class="keyword">        </span>{
00050                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a> ( v[0] + addOperand.<a class="code" href="classVector.html#m0">v</a>[0],
00051                                                 v[1] + addOperand.<a class="code" href="classVector.html#m0">v</a>[1],
00052                                                 v[2] + addOperand.<a class="code" href="classVector.html#m0">v</a>[2]);
00053         }
00054 
<a name="l00055"></a><a class="code" href="classVector.html#a7">00055</a>         <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a5">operator-</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; substractOperand)<span class="keyword"> const</span>
00056 <span class="keyword">        </span>{
00057                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a>(  v[0] - substractOperand.<a class="code" href="classVector.html#m0">v</a>[0],
00058                                                 v[1] - substractOperand.<a class="code" href="classVector.html#m0">v</a>[1],
00059                                                 v[2] - substractOperand.<a class="code" href="classVector.html#m0">v</a>[2]);
00060         }
00061 
<a name="l00062"></a><a class="code" href="classVector.html#a8">00062</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a8">operator-=</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; a)
00063         {
00064                 <a class="code" href="classVector.html#m0">v</a>[0] -= a[0];
00065                 <a class="code" href="classVector.html#m0">v</a>[1] -= a[1];
00066                 <a class="code" href="classVector.html#m0">v</a>[2] -= a[2];
00067         }
00068 
<a name="l00069"></a><a class="code" href="classVector.html#a9">00069</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a9">operator+=</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; a)
00070         {
00071                 <a class="code" href="classVector.html#m0">v</a>[0] += a[0];
00072                 <a class="code" href="classVector.html#m0">v</a>[1] += a[1];
00073                 <a class="code" href="classVector.html#m0">v</a>[2] += a[2];
00074         }
00075 <span class="comment"></span>
00076 <span class="comment">        //! Implements the blend operator</span>
<a name="l00077"></a><a class="code" href="classVector.html#a10">00077</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a10">operator%=</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; a)
00078         {
00079                 <a class="code" href="classVector.html#m0">v</a>[0] *= a[0];
00080                 <a class="code" href="classVector.html#m0">v</a>[1] *= a[1];
00081                 <a class="code" href="classVector.html#m0">v</a>[2] *= a[2];
00082         }
00083 <span class="comment"></span>
00084 <span class="comment">        //! Implements the blend operator</span>
<a name="l00085"></a><a class="code" href="classVector.html#a11">00085</a> <span class="comment"></span>        <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a11">operator%</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; blendOperand)<span class="keyword"> const</span>
00086 <span class="keyword">        </span>{
00087                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a>(  v[0] * blendOperand.<a class="code" href="classVector.html#m0">v</a>[0],
00088                                                 v[1] * blendOperand.<a class="code" href="classVector.html#m0">v</a>[1],
00089                                                 v[2] * blendOperand.<a class="code" href="classVector.html#m0">v</a>[2]);
00090         }
00091 <span class="comment"></span>
00092 <span class="comment">        //! Implmentes the scale operator</span>
<a name="l00093"></a><a class="code" href="classVector.html#a12">00093</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a12">operator*=</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> scale)
00094         {
00095                 <a class="code" href="classVector.html#m0">v</a>[0] *= scale;
00096                 <a class="code" href="classVector.html#m0">v</a>[1] *= scale;
00097                 <a class="code" href="classVector.html#m0">v</a>[2] *= scale;
00098         }
00099 <span class="comment"></span>
00100 <span class="comment">        //! Implmentes the scale operator</span>
<a name="l00101"></a><a class="code" href="classVector.html#a13">00101</a> <span class="comment"></span>        <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a13">operator*</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> scale)<span class="keyword"> const</span>
00102 <span class="keyword">        </span>{
00103                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a>(scale * v[0], scale * v[1], scale * v[2]);
00104         }
00105 
<a name="l00106"></a><a class="code" href="classVector.html#a14">00106</a>         <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a14">operator/</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> scale)<span class="keyword"> const</span>
00107 <span class="keyword">        </span>{
00108                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a>(v[0]/scale, v[1]/scale, v[2]/scale);
00109         }
00110 
<a name="l00111"></a><a class="code" href="classVector.html#a15">00111</a>         <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; <a class="code" href="classVector.html#a15">operator/=</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> scale)
00112         {
00113                 <a class="code" href="classVector.html#m0">v</a>[0]/=scale;
00114                 <a class="code" href="classVector.html#m0">v</a>[1]/=scale;
00115                 <a class="code" href="classVector.html#m0">v</a>[2]/=scale;
00116 
00117                 <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00118         }
00119 <span class="comment"></span>
00120 <span class="comment">        //! @return Calculates the dot product</span>
<a name="l00121"></a><a class="code" href="classVector.html#a16">00121</a> <span class="comment"></span>        <span class="keywordtype">float</span> <a class="code" href="classVector.html#a13">operator*</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; dotProductOperand)<span class="keyword"> const</span>
00122 <span class="keyword">        </span>{
00123                 <span class="keywordflow">return</span>  <a class="code" href="classVector.html#m0">v</a>[0] * dotProductOperand[0] + 
00124                                 <a class="code" href="classVector.html#m0">v</a>[1] * dotProductOperand[1] +
00125                                 <a class="code" href="classVector.html#m0">v</a>[2] * dotProductOperand[2];
00126         }
00127 <span class="comment"></span>
00128 <span class="comment">        //! @return Calculates the cross product</span>
<a name="l00129"></a><a class="code" href="classVector.html#a17">00129</a> <span class="comment"></span>        <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html#a17">operator&amp;&amp;</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; crossProductOperand)<span class="keyword"> const</span>
00130 <span class="keyword">        </span>{
00131                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#a0">Vector</a>(
00132                         v[1] * crossProductOperand[2] - v[2] * crossProductOperand[1],
00133                         v[2] * crossProductOperand[0] - v[0] * crossProductOperand[2],
00134                         v[0] * crossProductOperand[1] - v[1] * crossProductOperand[0]);
00135         }
00136 <span class="comment"></span>
00137 <span class="comment">        //! @return Calculates the length of the vector</span>
<a name="l00138"></a><a class="code" href="classVector.html#a18">00138</a> <span class="comment"></span>        <span class="keywordtype">float</span> <a class="code" href="classVector.html#a18">Norm</a>() { <span class="keywordflow">return</span> sqrtf(<a class="code" href="classVector.html#a19">Norm2</a>()); }
<a name="l00139"></a><a class="code" href="classVector.html#a19">00139</a>         <span class="keywordtype">float</span> <a class="code" href="classVector.html#a19">Norm2</a>() { <span class="keywordflow">return</span> <a class="code" href="classVector.html#m0">v</a>[0]*<a class="code" href="classVector.html#m0">v</a>[0] + v[1]*v[1] + v[2]*v[2]; }
00140 <span class="comment"></span>
00141 <span class="comment">        //! Normalizes the vector</span>
00142 <span class="comment">        //! @return the length of original Vector</span>
<a name="l00143"></a><a class="code" href="classVector.html#a20">00143</a> <span class="comment"></span>        <span class="keywordtype">float</span> <a class="code" href="classVector.html#a20">Normalize</a> ()
00144         {
00145                 <span class="keywordtype">float</span> length=<a class="code" href="classVector.html#a18">Norm</a>();
00146                 <a class="code" href="classVector.html#a12">operator*=</a>(1.0f/length);
00147                 <span class="keywordflow">return</span> length;
00148         }
00149 
<a name="l00150"></a><a class="code" href="classVector.html#a21">00150</a>         <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; <a class="code" href="classVector.html#a21">operator=</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; other)
00151         {
00152                 <a class="code" href="classVector.html#m0">v</a>[0] = other.<a class="code" href="classVector.html#m0">v</a>[0];
00153                 <a class="code" href="classVector.html#m0">v</a>[1] = other.<a class="code" href="classVector.html#m0">v</a>[1];
00154                 <a class="code" href="classVector.html#m0">v</a>[2] = other.<a class="code" href="classVector.html#m0">v</a>[2];
00155                 <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00156         }
00157 
<a name="l00158"></a><a class="code" href="classVector.html#a22">00158</a>         <span class="keywordtype">float</span>&amp; <a class="code" href="classVector.html#a22">operator[]</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index)
00159         {
00160                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#m0">v</a>[index];
00161         }
00162 
<a name="l00163"></a><a class="code" href="classVector.html#a23">00163</a>         <span class="keywordtype">float</span> <a class="code" href="classVector.html#a22">operator[]</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index)<span class="keyword"> const</span>
00164 <span class="keyword">        </span>{
00165                 <span class="keywordflow">return</span> <a class="code" href="classVector.html#m0">v</a>[index];
00166         }
00167 <span class="comment"></span>
00168 <span class="comment">        //!accumulate &lt;b&gt;mimimum&lt;/b&gt; operator</span>
<a name="l00169"></a><a class="code" href="classVector.html#a24">00169</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a24">operator&lt;=</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; s)
00170         {
00171                 <span class="keywordflow">if</span>(<a class="code" href="classVector.html#m0">v</a>[0] &gt; s[0]) <a class="code" href="classVector.html#m0">v</a>[0] = s[0];
00172                 <span class="keywordflow">if</span>(<a class="code" href="classVector.html#m0">v</a>[1] &gt; s[1]) <a class="code" href="classVector.html#m0">v</a>[1] = s[1];
00173                 <span class="keywordflow">if</span>(<a class="code" href="classVector.html#m0">v</a>[2] &gt; s[2]) <a class="code" href="classVector.html#m0">v</a>[2] = s[2];
00174         }
00175 <span class="comment"></span>
00176 <span class="comment">        //!accumulate &lt;b&gt;maximum&lt;/b&gt; operator</span>
<a name="l00177"></a><a class="code" href="classVector.html#a25">00177</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a25">operator&gt;=</a>(<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; large)
00178         {
00179                 <span class="keywordflow">if</span>(<a class="code" href="classVector.html#m0">v</a>[0] &lt; large[0]) <a class="code" href="classVector.html#m0">v</a>[0] = large[0];
00180                 <span class="keywordflow">if</span>(<a class="code" href="classVector.html#m0">v</a>[1] &lt; large[1]) <a class="code" href="classVector.html#m0">v</a>[1] = large[1];
00181                 <span class="keywordflow">if</span>(<a class="code" href="classVector.html#m0">v</a>[2] &lt; large[2]) <a class="code" href="classVector.html#m0">v</a>[2] = large[2];
00182         }
00183 
<a name="l00184"></a><a class="code" href="classVector.html#a26">00184</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a26">SetLinearCombination</a> (<span class="keywordtype">float</span> scaleA, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; a, <span class="keywordtype">float</span> scaleB, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; b, <span class="keywordtype">float</span> scaleC, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; c) {
00185                 *<span class="keyword">this</span> = a*scaleA + b*scaleB + c*scaleC;
00186         }
00187 
<a name="l00188"></a><a class="code" href="classVector.html#a27">00188</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a26">SetLinearCombination</a> (<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; a, <span class="keywordtype">float</span> scaleB, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; b, <span class="keywordtype">float</span> scaleC, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; c) {
00189                 *<span class="keyword">this</span> = a + b*scaleB + c*scaleC;
00190         }
00191 <span class="comment"></span>
00192 <span class="comment">        //! Calculates the average of the components</span>
<a name="l00193"></a><a class="code" href="classVector.html#a28">00193</a> <span class="comment"></span>        <span class="keywordtype">float</span> <a class="code" href="classVector.html#a28">Average</a>() { <span class="keywordflow">return</span> (<a class="code" href="classVector.html#m0">v</a>[0]+<a class="code" href="classVector.html#m0">v</a>[1]+<a class="code" href="classVector.html#m0">v</a>[2])/3.0f; }
00194 
00195 
00196         <span class="comment">//----------------------------------------------------</span>
00197 
00198 <span class="comment"></span>
00199 <span class="comment">        //! Set the vector to the ideal reflection dir of the incoming direction</span>
<a name="l00200"></a><a class="code" href="classVector.html#a29">00200</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a29">SetIdealReflectedDirection</a> (<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; in, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; normal)
00201         {
00202                 *<span class="keyword">this</span> = in - normal * (2.0f * (normal * in));
00203         }
00204 <span class="comment"></span>
00205 <span class="comment">        //! Set the vector to the ideal reflection dir of the incoming direction, </span>
00206 <span class="comment">        //! using a precomputed dotNormalIn dotproduct</span>
<a name="l00207"></a><a class="code" href="classVector.html#a30">00207</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classVector.html#a29">SetIdealReflectedDirection</a> (<span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; in, <span class="keyword">const</span> <a class="code" href="classVector.html">Vector</a>&amp; normal, <span class="keywordtype">float</span> dotNormalIn)
00208         {
00209                 *<span class="keyword">this</span> = in - normal * (2.0f * dotNormalIn);
00210         }
00211 <span class="comment"></span>
00212 <span class="comment">        //! Determines the dominant axe</span>
00213 <span class="comment"></span><span class="comment">        /*! @return Returns the dominant axe out of (x,y,z) */</span>
<a name="l00214"></a><a class="code" href="classVector.html#a31">00214</a>         <a class="code" href="globals_8hpp.html#a13">DominantAxis</a> <a class="code" href="classVector.html#a31">GetDominantAxis</a> (<span class="keywordtype">void</span>)<span class="keyword"> const </span>{
00215                 <span class="keywordtype">double</span> dx = fabs (x);
00216                 <span class="keywordtype">double</span> dy = fabs (y);
00217                 <span class="keywordtype">double</span> dz = fabs (z);
00218                 <span class="keywordflow">return</span> (dx &gt; dy) ? ((dx &gt; dz) ? <a class="code" href="globals_8hpp.html#a13a10">X_DOMINANT</a> : <a class="code" href="globals_8hpp.html#a13a12">Z_DOMINANT</a>) : ((dy &gt; dz) ? <a class="code" href="globals_8hpp.html#a13a11">Y_DOMINANT</a> : <a class="code" href="globals_8hpp.html#a13a12">Z_DOMINANT</a>);
00219         }
00220 
<a name="l00221"></a><a class="code" href="classVector.html#a32">00221</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a32">CalculateCoordSystem</a> (<a class="code" href="classVector.html">Vector</a>&amp; X, <a class="code" href="classVector.html">Vector</a>&amp; Y, <a class="code" href="classVector.html">Vector</a>&amp; Z)<span class="keyword"> const</span>
00222 <span class="keyword">        </span>{
00223                 Z = *<span class="keyword">this</span>;
00224                 <a class="code" href="globals_8hpp.html#a13">DominantAxis</a> dominantAxis = <a class="code" href="classVector.html#a31">GetDominantAxis</a> ();
00225                 
00226                 <a class="code" href="classVector.html">Vector</a> axis;
00227                 <span class="keywordflow">if</span> (dominantAxis == <a class="code" href="globals_8hpp.html#a13a12">Z_DOMINANT</a>) 
00228                         axis.<a class="code" href="classVector.html#a2">Set</a>(0.0, 1.0, 0.0);
00229                 <span class="keywordflow">else</span> 
00230                         axis.<a class="code" href="classVector.html#a2">Set</a>(0.0, 0.0, 1.0);
00231 
00232                 X= axis &amp;&amp; Z;   <span class="comment">// CrossProduct</span>
00233                 X.<a class="code" href="classVector.html#a20">Normalize</a> ();
00234                 Y= Z &amp;&amp; X;              <span class="comment">// CrossProduct</span>
00235                 Y.<a class="code" href="classVector.html#a20">Normalize</a> ();
00236         }
00237 <span class="comment"></span>
00238 <span class="comment">        //! Sample the hemisphere following the cos distribution</span>
00239 <span class="comment"></span><span class="comment">        /*! For further information, see McCabe: Markov Chain MC: p. 18</span>
00240 <span class="comment">         * *this = normal vector</span>
00241 <span class="comment">         * @param outDir [out] The generated new direction, using *this as the normal vector</span>
00242 <span class="comment">         * @param pdf [out] Probability of the selected direction</span>
00243 <span class="comment">         */</span>
<a name="l00244"></a><a class="code" href="classVector.html#a33">00244</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a33">SampleHemisphereCosTheta</a> (<a class="code" href="classVector.html">Vector</a>&amp; outDir, <span class="keywordtype">float</span>&amp; pdf)<span class="keyword"> const</span>
00245 <span class="keyword">        </span>{
00246                 <a class="code" href="classVector.html">Vector</a> X, Y, Z; 
00247                 <a class="code" href="classVector.html#a32">CalculateCoordSystem</a> (X, Y, Z);
00248 
00249                 <span class="keywordtype">float</span> phi = (float)(2.0f * <a class="code" href="globals_8hpp.html#a2">M_PI</a> * <a class="code" href="globals_8hpp.html#a9">RAND</a>);
00250                 <span class="keywordtype">float</span> xi_2 = <a class="code" href="globals_8hpp.html#a9">RAND</a>;
00251                 <span class="keywordtype">float</span> cos_phi = cosf(phi);
00252                 <span class="keywordtype">float</span> sin_phi = sinf(phi);
00253                 <span class="keywordtype">float</span> cos_theta = sqrtf(xi_2);
00254                 <span class="keywordtype">float</span> sin_theta = sqrtf(1.0f - xi_2);
00255 
00256                 <span class="comment">// see McCabe: Markov Chain MC: p. 18</span>
00257                 outDir.<a class="code" href="classVector.html#a26">SetLinearCombination</a>(sin_theta * cos_phi, X, sin_theta * sin_phi, Y, cos_theta, Z);
00258                 pdf = (float) (cos_theta / <a class="code" href="globals_8hpp.html#a2">M_PI</a>);
00259         }
00260 <span class="comment"></span>
00261 <span class="comment">        /*! find a random direction of a cos^n(Theta) distribution with its modus at the ideal </span>
00262 <span class="comment">         *      reflection direction</span>
00263 <span class="comment">         *      *this = idealReflDir</span>
00264 <span class="comment">         * @param Ns [in] specular exponent of the Brdf function</span>
00265 <span class="comment">         * @param specularPdfScaling [in] Precalculated Brdf variable, specularPdfScaling = (Ns + 1.0f)  / PI2;</span>
00266 <span class="comment">         * @param outDir [out] The generated new direction, using *this as the idealReflDir</span>
00267 <span class="comment">         * @param pdf [out] Probability of the selected direction</span>
00268 <span class="comment">        */</span>
<a name="l00269"></a><a class="code" href="classVector.html#a34">00269</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a34">SampleHemisphereCosNTheta</a> (<span class="keywordtype">float</span> Ns, <span class="keywordtype">float</span> specularPdfScaling, <a class="code" href="classVector.html">Vector</a>&amp; outDir, <span class="keywordtype">float</span>&amp; pdf)
00270         {
00271                 <a class="code" href="classVector.html">Vector</a> X, Y, Z; 
00272                 <a class="code" href="classVector.html#a32">CalculateCoordSystem</a> (X, Y, Z);
00273                 
00274                 <span class="keywordtype">float</span> phi = (float)(2.0f * <a class="code" href="globals_8hpp.html#a2">M_PI</a> * <a class="code" href="globals_8hpp.html#a9">RAND</a>);
00275                 <span class="keywordtype">float</span> cos_phi = cosf (phi);
00276                 <span class="keywordtype">float</span> sin_phi = sinf (phi);
00277                 <span class="keywordtype">float</span> cos_theta = powf (RAND, 1.0f / (Ns + 1));
00278                 <span class="keywordtype">float</span> sin_theta = sqrtf (1.0f - cos_theta*cos_theta);
00279 
00280                 outDir.<a class="code" href="classVector.html#a26">SetLinearCombination</a>(sin_theta * cos_phi, X, sin_theta * sin_phi, Y, cos_theta, Z);
00281                 pdf = powf (cos_theta, Ns) * specularPdfScaling;
00282         }
00283 
<a name="l00284"></a><a class="code" href="classVector.html#a35">00284</a>         <span class="keywordtype">void</span> <a class="code" href="classVector.html#a35">GenerateRandomTransillumDir</a>()
00285         {
00286                 <span class="keywordtype">float</span> mfi = 2.0f * <a class="code" href="globals_8hpp.html#a2">M_PI</a> * <a class="code" href="globals_8hpp.html#a9">RAND</a>;
00287                 <span class="keywordtype">float</span> mteta = acosf(1.0f - 2.0f * RAND);
00288                 <a class="code" href="classVector.html#a2">Set</a>(sinf(mfi) * sinf(mteta), cosf(mfi) * sinf(mteta), cosf(mteta));
00289         }
00290 
00291 };
00292 <span class="comment"></span>
00293 <span class="comment">//! Color is represented by Red, Green, Blue components</span>
<a name="l00294"></a><a class="code" href="Vector_8hpp.html#a0">00294</a> <span class="comment"></span><span class="keyword">typedef</span> <a class="code" href="classVector.html">Vector</a> <a class="code" href="classVector.html">Color</a>;
</pre></div><hr><address style="align: right;"><small>Generated on Tue Feb 18 18:30:34 2003 for Stochastic Iteration for Non-diffuse Global Illumination by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc2 </small></address>
</body>
</html>
