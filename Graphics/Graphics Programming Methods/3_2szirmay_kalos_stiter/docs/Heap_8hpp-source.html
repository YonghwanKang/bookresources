<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Heap.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc2 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Heap.hpp</h1><a href="Heap_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">// template class for a min-heap</span>
00002 <span class="comment">// E must define operators for comparison</span>
00003 
00004 <span class="preprocessor">#pragma once</span>
00005 <span class="preprocessor"></span>
00006 <span class="keyword">template</span> &lt; <span class="keyword">class</span> E &gt;
<a name="l00007"></a><a class="code" href="classHeap.html">00007</a> <span class="keyword">class </span><a class="code" href="classHeap.html">Heap</a>
00008 {
00009 <span class="keyword">public</span>:
00010         <a class="code" href="classHeap.html#a0">Heap</a> ( <span class="keywordtype">int</span> maxNumber);
00011     <a class="code" href="classHeap.html#a1">~Heap</a> ();
00012 
00013     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classHeap.html#a2">insert</a> ( <span class="keyword">const</span> E &amp;newElement ); 
00014     <span class="keyword">inline</span> E <a class="code" href="classHeap.html#a3">removeMin</a> ();
00015 
00016     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classHeap.html#a4">isEmpty</a> () <span class="keyword">const</span>;
00017     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classHeap.html#a5">isFull</a> () <span class="keyword">const</span>;
00018 
00019 <span class="keyword">private</span>:<span class="comment"></span>
00020 <span class="comment">        //! Maximum number of elements in the heap</span>
<a name="l00021"></a><a class="code" href="classHeap.html#o0">00021</a> <span class="comment"></span>        <span class="keywordtype">int</span> <a class="code" href="classHeap.html#o0">maxSize</a>;
00022 <span class="comment"></span>
00023 <span class="comment">        //! Actual number of elements in the heap</span>
<a name="l00024"></a><a class="code" href="classHeap.html#o1">00024</a> <span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="classHeap.html#o1">size</a>;      
00025 <span class="comment"></span>
00026 <span class="comment">        //! Array containing the heap elements</span>
<a name="l00027"></a><a class="code" href="classHeap.html#o2">00027</a> <span class="comment"></span>    E *<a class="code" href="classHeap.html#o2">element</a>;   
00028 };
00029 
00030 
00031 <span class="preprocessor">#include "heap.hpp"</span>
00032 
00033 <span class="keyword">template</span>&lt;<span class="keyword">class</span> E&gt;
<a name="l00034"></a><a class="code" href="classHeap.html#a0">00034</a> <a class="code" href="classHeap.html#a0">Heap&lt;E&gt;::Heap</a>( <span class="keywordtype">int</span> maxNumber)
00035 {
00036         <a class="code" href="classHeap.html#o0">maxSize</a> = maxNumber;
00037     <a class="code" href="classHeap.html#o1">size</a> = 0;
00038         <a class="code" href="classHeap.html#o2">element</a> = <span class="keyword">new</span> E [<a class="code" href="classHeap.html#o0">maxSize</a>];
00039 }
00040 
00041 <span class="keyword">template</span> &lt;<span class="keyword">class</span> E&gt;
<a name="l00042"></a><a class="code" href="classHeap.html#a1">00042</a> <a class="code" href="classHeap.html#a1">Heap&lt;E&gt;::~Heap</a>()
00043 {
00044         <span class="keyword">delete</span> [] <a class="code" href="classHeap.html#o2">element</a>;
00045 }
00046 
00047 <span class="keyword">template</span>&lt;<span class="keyword">class</span> E&gt;
<a name="l00048"></a><a class="code" href="classHeap.html#a2">00048</a> <span class="keywordtype">bool</span> <a class="code" href="classHeap.html#a2">Heap&lt;E&gt;::insert</a>(<span class="keyword">const</span> E &amp; newElement)
00049 {
00050         <span class="keywordtype">int</span> currpos = <a class="code" href="classHeap.html#o1">size</a>;
00051         <span class="keywordtype">int</span> parentpos = (size -1)/2;
00052         <span class="keywordtype">int</span> isPosition = 0;
00053         <span class="keywordflow">if</span> ( <a class="code" href="classHeap.html#a5">isFull</a>() )
00054     {
00055                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00056     }
00057         <span class="comment">// Inserts newElement into the heap;</span>
00058         <a class="code" href="classHeap.html#o2">element</a>[size] = newElement;
00059         size ++;
00060     
00061         <span class="comment">// if newElement is lower, move it upward</span>
00062         <span class="keywordflow">while</span> ( currpos &gt; 0 &amp;&amp; !isPosition)
00063         {
00064                 <span class="keywordflow">if</span> ( <a class="code" href="classHeap.html#o2">element</a>[currpos] &gt;= <a class="code" href="classHeap.html#o2">element</a>[parentpos] )
00065                         isPosition = 1;
00066                 <span class="keywordflow">else</span>
00067                 {
00068                         element[currpos] = element[parentpos];
00069                         element[parentpos] = newElement;
00070                         currpos = parentpos;
00071                         parentpos = ( currpos -1 )/2 ;
00072                 }
00073         }
00074         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00075 }
00076 
00077 <span class="keyword">template</span>&lt;<span class="keyword">class</span> E&gt;
<a name="l00078"></a><a class="code" href="classHeap.html#a3">00078</a> E <a class="code" href="classHeap.html#a3">Heap&lt;E&gt;::removeMin</a>() 
00079 {
00080         E delItem, temp;
00081         <span class="keywordtype">int</span> currpos, lpos, rpos, isPosition = 0;
00082         <span class="keywordflow">if</span> ( <a class="code" href="classHeap.html#a4">isEmpty</a>() )
00083         {
00084                 exit(1);
00085         }
00086 
00087         <span class="comment">// removes the root</span>
00088         delItem = <a class="code" href="classHeap.html#o2">element</a>[0];
00089         <a class="code" href="classHeap.html#o1">size</a> --;
00090 
00091         <span class="comment">// replace the root with the bottom right-most element</span>
00092         element[0] = element[<a class="code" href="classHeap.html#o1">size</a>];
00093         temp = element[0];
00094 
00095         <span class="comment">// set the current position and left and right child positions</span>
00096         currpos = 0;
00097         lpos = 2*currpos + 1;
00098         rpos = 2*currpos + 2;
00099 
00100         <span class="comment">// if the replacement is not proper, move it downward until the </span>
00101         <span class="comment">// the properties that define a min-heap are restored</span>
00102         <span class="keywordflow">while</span> ( <a class="code" href="classHeap.html#o1">size</a> &gt; currpos+1 &amp;&amp; !isPosition )
00103         {
00104         temp = element[currpos];         
00105                 <span class="keywordflow">if</span> ( rpos &lt; <a class="code" href="classHeap.html#o1">size</a> )
00106                 {
00107                         <span class="keywordflow">if</span> ( element[currpos] &gt; element[lpos] ||
00108                                 element[currpos] &gt; element[rpos] )
00109                         { 
00110                                 <span class="keywordflow">if</span> ( element[lpos] &lt; element[rpos] )
00111                                 {
00112                                         element[currpos] = element[lpos];
00113                                         element[lpos] = temp;
00114                                         currpos = lpos;
00115                                 }
00116                                 <span class="keywordflow">else</span>
00117                                 {
00118                                         element[currpos] = element[rpos];
00119                                         element[rpos] = temp;
00120                                         currpos = rpos;
00121                                 }
00122                         }
00123                 }
00124                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( lpos &lt; <a class="code" href="classHeap.html#o1">size</a> &amp;&amp; element[lpos] &lt; element[currpos] )
00125                 {
00126                         element[currpos] = element[lpos];
00127                         element[lpos] = temp;
00128                         currpos = lpos;
00129                 }
00130                 temp = element[currpos];
00131                 lpos = 2*currpos +1;
00132                 rpos = 2*currpos +2;
00133 
00134                 <span class="keywordflow">if</span> ( (lpos &gt;= <a class="code" href="classHeap.html#o1">size</a>)
00135                         || 
00136                         element[currpos] &lt;= element[lpos]
00137                         &amp;&amp;
00138                         element[currpos] &lt;= element[rpos])
00139                         isPosition = 1;
00140         }
00141         <span class="keywordflow">return</span> delItem;
00142 }
00143 
00144 <span class="keyword">template</span>&lt;<span class="keyword">class</span> E&gt;
<a name="l00145"></a><a class="code" href="classHeap.html#a4">00145</a> <span class="keywordtype">int</span> <a class="code" href="classHeap.html#a4">Heap&lt;E&gt;:: isEmpty</a>()<span class="keyword"> const</span>
00146 <span class="keyword"></span>{
00147         <span class="keywordflow">return</span> <a class="code" href="classHeap.html#o1">size</a>==0;
00148 }
00149 
00150 <span class="keyword">template</span>&lt;<span class="keyword">class</span> E&gt;
<a name="l00151"></a><a class="code" href="classHeap.html#a5">00151</a> <span class="keywordtype">int</span> <a class="code" href="classHeap.html#a5">Heap&lt;E&gt;::isFull</a>()<span class="keyword"> const</span>
00152 <span class="keyword"></span>{
00153         <span class="keywordflow">return</span> <a class="code" href="classHeap.html#o1">size</a> == <a class="code" href="classHeap.html#o0">maxSize</a>;
00154 }
</pre></div><hr><address style="align: right;"><small>Generated on Tue Feb 18 18:30:33 2003 for Stochastic Iteration for Non-diffuse Global Illumination by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc2 </small></address>
</body>
</html>
