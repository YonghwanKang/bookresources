<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CPhongBrdf class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc2 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>CPhongBrdf Class Reference</h1><code>#include &lt;<a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>&gt;</code>
<p>
Collaboration diagram for CPhongBrdf:<p><center><img src="classCPhongBrdf__coll__graph.png" border="0" usemap="#CPhongBrdf__coll__map" alt="Collaboration graph"></center>
<map name="CPhongBrdf__coll__map">
<area href="classVector.html" shape="rect" coords="24,16,72,37" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classCPhongBrdf-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a0">EvalBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>evalute the BRDF for the given incoming and outgoing directions</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a1">EvalBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal, const float dotNormalIn)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a2">EvalBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal, const float dotNormalIn, const float dotNormalOut)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a3">EvalDiffuseBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>evalute the diffuse BRDF function for the given incoming and outgoing directions</em> <a href="#a3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a4">EvalDiffuseBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal, const float dotNormalOut)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a5">EvalSpecularBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>evalute the specular BRDF function for the given incoming and outgoing directions</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a6">EvalSpecularBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal, const float dotNormalIn)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a7">EvalSpecularBrdf</a> (const <a class="el" href="classVector.html">Vector</a> &amp;in, const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal, const float dotNormalIn, const float dotNormalOut)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a8">GetDiffuseBrdf</a> ()</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a9">GetAverageBrdf</a> ()</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a10">GetDiffuseAlbedo</a> ()</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a11">GetSpecularAlbedo</a> ()</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a12">GetAlbedo</a> ()</td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a13">GetReflectanceLum</a> ()</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a14">ComputedSpecularMaxPhongAlbedo</a> (const <a class="el" href="classVector.html">Vector</a> &amp;out, const <a class="el" href="classVector.html">Vector</a> &amp;normal)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a15">CalculateMaxPhongSpecularAlbedo</a> (const <a class="el" href="classVector.html">Vector</a> &amp;outDir, const <a class="el" href="classVector.html">Vector</a> &amp;normal)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#a16">FinishPhong</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>precalculate values needed for quick evaluation from primary parameters</em> <a href="#a16"></a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m0">Kd</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>diffuse albedo (kd = Kd/pi)</em> <a href="#m0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m1">Ks</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>specular albedo (ks = Ks*(n+2)/(2*pi))</em> <a href="#m1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m2">kd</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>diffuse coefficient of the BRDF</em> <a href="#m2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m3">avgBrdf</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>average BRDF</em> <a href="#m3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m4">Ns</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>specular exponent</em> <a href="#m4"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m5">avgKd</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>average diffuse and specular albedo</em> <a href="#m5"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m6">avgKs</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>average diffuse and specular albedo</em> <a href="#m6"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m7">specularScaling</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>pre-processed values</em> <a href="#m7"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m8">specularPdfScaling</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>pre-processed values</em> <a href="#m8"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m9">scatteredPower</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>pre-processed values</em> <a href="#m9"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m10">specularMaxPhongScaling</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classVector.html">Color</a>&nbsp;</td><td valign=bottom><a class="el" href="classCPhongBrdf.html#m11">maxPhongSpecularAlbedos</a> [SpecularAlbedosNum]</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Lafortune's modified Phong BRDF. It satisfies the requirements of symmetry and energy conservation. The BRDF is expressed as:
<p>
brdf(in, out) = kd + ks*pow(cos(a),n)
<p>
Where: kd: diffuse coefficient of the BRDF ks: specular coefficient of the BRDF n: specular power n small : glossy reflectance n large : specular reflectance (&gt;= PHONG_LOWEST_SPECULAR_EXP) a: angle between the out direction and the perfect mirror direction for in 
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00020">20</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.<hr><h2>Member Function Documentation</h2>
<a name="a15" doxytag="CPhongBrdf::CalculateMaxPhongSpecularAlbedo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::CalculateMaxPhongSpecularAlbedo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>outDir</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8cpp-source.html#l00087">87</a> of file <a class="el" href="Phong_8cpp-source.html">Phong.cpp</a>.
<p>
References <a class="el" href="Phong_8hpp-source.html#l00070">EvalSpecularBrdf()</a>, <a class="el" href="Vector_8hpp-source.html#l00284">Vector::GenerateRandomTransillumDir()</a>, and <a class="el" href="globals_8hpp-source.html#l00014">PI2</a>.
<p>
Referenced by <a class="el" href="Phong_8hpp-source.html#l00091">FinishPhong()</a>.
<p>
<div class="fragment"><pre>00088 {       
00089         <a class="code" href="classVector.html">Color</a> albedo = Color::BLACK;
00090         <span class="keywordtype">long</span> nSample = 2000;
00091         <a class="code" href="classVector.html">Vector</a> inDir;
00092         <span class="keywordflow">for</span> (<span class="keywordtype">long</span> i = 0; i &lt; nSample; i++) {
00093                 inDir.<a class="code" href="classVector.html#a35">GenerateRandomTransillumDir</a>();
00094                 <span class="keywordtype">float</span> cosIn = inDir * normal;   <span class="comment">//.DotProduct(normal);</span>
00095                 <span class="keywordflow">if</span> (cosIn &gt; 0) {
00096                         inDir *= -1.0f;
00097                 } <span class="keywordflow">else</span> {
00098                         cosIn *= -1.0;
00099                 }
00100 
00101                 <a class="code" href="classVector.html">Color</a> fx = <a class="code" href="classCPhongBrdf.html#a5">EvalSpecularBrdf</a>(inDir, outDir, normal);
00102 
00103                 <span class="comment">// in points TO the surface</span>
00104                 albedo += fx * (cosIn * <a class="code" href="globals_8hpp.html#a4">PI2</a>);
00105         }
00106         albedo *= (1.0f / nSample);
00107 
00108         <span class="comment">//Color err=albedo-Ks;</span>
00109         <span class="comment">//float error=(fabsf(err.r)+fabsf(err.g)+fabsf(err.b))/3.0f;</span>
00110         <span class="keywordflow">return</span> albedo;
00111 }
</pre></div>    </td>
  </tr>
</table>
<a name="a14" doxytag="CPhongBrdf::ComputedSpecularMaxPhongAlbedo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::ComputedSpecularMaxPhongAlbedo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8cpp-source.html#l00114">114</a> of file <a class="el" href="Phong_8cpp-source.html">Phong.cpp</a>.
<p>
References <a class="el" href="globals_8hpp-source.html#l00012">M_PI</a>, <a class="el" href="Phong_8hpp-source.html#l00085">maxPhongSpecularAlbedos</a>, and <a class="el" href="Phong_8hpp-source.html#l00005">SpecularAlbedosNum</a>.
<p>
Referenced by <a class="el" href="StIter_8cpp-source.html#l00411">StIter::DoIteration()</a>, <a class="el" href="StIter_8cpp-source.html#l00785">StIter::GenerateImportanceDirection()</a>, <a class="el" href="StIter_8cpp-source.html#l00753">StIter::GenerateRadianceDirection()</a>, <a class="el" href="StIter_8cpp-source.html#l00867">StIter::getImportance()</a>, <a class="el" href="StIter_8cpp-source.html#l00838">StIter::getRadiance()</a>, <a class="el" href="StIter_8cpp-source.html#l00718">StIter::ImportanceDirectionProbability()</a>, and <a class="el" href="StIter_8cpp-source.html#l00699">StIter::RadianceDirectionProbability()</a>.
<p>
<div class="fragment"><pre>00114                                                                                         {
00115         <span class="keywordtype">float</span> cosOut            = out * normal; <span class="comment">//.DotProduct(normal);</span>
00116         <span class="keywordtype">float</span> outRadian         = acosf(cosOut);
00117         <span class="keywordtype">short</span> index                     = (short) (outRadian / (<a class="code" href="globals_8hpp.html#a2">M_PI</a>/2.0f)* <a class="code" href="Phong_8hpp.html#a0">SpecularAlbedosNum</a>);
00118 <span class="comment">//      assert(index &gt;= 0 &amp;&amp; index &lt; SpecularAlbedosNum);</span>
00119 
00120         <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m11">maxPhongSpecularAlbedos</a>[index];
00121         <span class="comment">//return Ks;</span>
00122 }
</pre></div>    </td>
  </tr>
</table>
<a name="a2" doxytag="CPhongBrdf::EvalBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalIn</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalOut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>in</em>&nbsp;</td><td>points TO the surface </td></tr>
    <tr><td valign=top><em>out</em>&nbsp;</td><td>points FROM the surface </td></tr>
    <tr><td valign=top><em>normal</em>&nbsp;</td><td>Normal of the surface at the point </td></tr>
    <tr><td valign=top><em>dotNormalOut</em>&nbsp;</td><td>dot product of (Normal, Out) ; precalculated value </td></tr>
    <tr><td valign=top><em>dotNormalIn</em>&nbsp;</td><td>dot product of (Normal, In) ;precalculated value </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="Phong_8cpp-source.html#l00010">10</a> of file <a class="el" href="Phong_8cpp-source.html">Phong.cpp</a>.
<p>
References <a class="el" href="Phong_8hpp-source.html#l00031">kd</a>, <a class="el" href="Phong_8hpp-source.html#l00028">Ks</a>, <a class="el" href="Vector_8hpp-source.html#l00200">Vector::SetIdealReflectedDirection()</a>, and <a class="el" href="Phong_8hpp-source.html#l00043">specularScaling</a>.
<p>
<div class="fragment"><pre>00012 {
00013         <span class="keywordflow">if</span> (dotNormalOut &lt; 0) {
00014                 <span class="keywordflow">return</span> Color::BLACK;
00015         }
00016 
00017 <span class="comment">// add diffuse part</span>
00018         <a class="code" href="classVector.html">Color</a> result = <a class="code" href="classCPhongBrdf.html#m2">kd</a>;      
00019 
00020 <span class="comment">// add specular</span>
00021         <a class="code" href="classVector.html">Vector</a> idealReflected;
00022         idealReflected.<a class="code" href="classVector.html#a29">SetIdealReflectedDirection</a> (in, normal, dotNormalIn);
00023         <span class="keywordtype">float</span> dotProduct = idealReflected*out;
00024     <span class="keywordflow">if</span>(dotProduct &gt; 0) {        <span class="comment">// this is Lafortune's modified Phong</span>
00025                 <span class="keywordtype">float</span> scale = powf (dotProduct, Ns) * <a class="code" href="classCPhongBrdf.html#m7">specularScaling</a>;
00026 
00027                 <span class="comment">//MAXPHONG </span>
00028                 <span class="keywordtype">float</span> nDotIn = - dotNormalIn;
00029 
00030                 <span class="keywordflow">if</span>(dotNormalOut &gt; nDotIn) scale /= dotNormalOut;
00031                 <span class="keywordflow">else</span> scale /= nDotIn;
00032 
00033                 result+=<a class="code" href="classCPhongBrdf.html#m1">Ks</a>*scale;
00034     }
00035 
00036         <span class="keywordflow">return</span> result;
00037 }
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="CPhongBrdf::EvalBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalIn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00052">52</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
References <a class="el" href="Phong_8hpp-source.html#l00051">EvalBrdf()</a>.
<p>
<div class="fragment"><pre>00052 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#a0">EvalBrdf</a>(in, out, normal, dotNormalIn, normal*out); }
</pre></div>    </td>
  </tr>
</table>
<a name="a0" doxytag="CPhongBrdf::EvalBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
evalute the BRDF for the given incoming and outgoing directions
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>in</em>&nbsp;</td><td>points TO the surface </td></tr>
    <tr><td valign=top><em>out</em>&nbsp;</td><td>points FROM the surface </td></tr>
    <tr><td valign=top><em>normal</em>&nbsp;</td><td>Normal of the surface at the point</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00051">51</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="StIter_8cpp-source.html#l00411">StIter::DoIteration()</a>, <a class="el" href="Phong_8hpp-source.html#l00052">EvalBrdf()</a>, <a class="el" href="StIter_8cpp-source.html#l00867">StIter::getImportance()</a>, and <a class="el" href="StIter_8cpp-source.html#l00279">StIter::SampleLightSources()</a>.
<p>
<div class="fragment"><pre>00051 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#a0">EvalBrdf</a>(in, out, normal, normal*in, normal*out); }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="CPhongBrdf::EvalDiffuseBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalDiffuseBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalOut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>in</em>&nbsp;</td><td>points TO the surface </td></tr>
    <tr><td valign=top><em>out</em>&nbsp;</td><td>points FROM the surface </td></tr>
    <tr><td valign=top><em>normal</em>&nbsp;</td><td>Normal of the surface at the point </td></tr>
    <tr><td valign=top><em>dotNormalOut</em>&nbsp;</td><td>dot product of (Normal, Out) ; precalculated value </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="Phong_8cpp-source.html#l00045">45</a> of file <a class="el" href="Phong_8cpp-source.html">Phong.cpp</a>.
<p>
References <a class="el" href="Phong_8hpp-source.html#l00031">kd</a>.
<p>
<div class="fragment"><pre>00046 {
00047         <span class="keywordflow">if</span> (dotNormalOut &lt; 0) <span class="keywordflow">return</span> Color::BLACK;
00048         <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m2">kd</a>; <span class="comment">// add diffuse part</span>
00049 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="CPhongBrdf::EvalDiffuseBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalDiffuseBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
evalute the diffuse BRDF function for the given incoming and outgoing directions
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>in</em>&nbsp;</td><td>points TO the surface </td></tr>
    <tr><td valign=top><em>out</em>&nbsp;</td><td>points FROM the surface </td></tr>
    <tr><td valign=top><em>normal</em>&nbsp;</td><td>Normal of the surface at the point</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00061">61</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
<div class="fragment"><pre>00061 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#a3">EvalDiffuseBrdf</a>(in, out, normal, normal*out);}
</pre></div>    </td>
  </tr>
</table>
<a name="a7" doxytag="CPhongBrdf::EvalSpecularBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalSpecularBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalIn</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalOut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>in</em>&nbsp;</td><td>points TO the surface </td></tr>
    <tr><td valign=top><em>out</em>&nbsp;</td><td>points FROM the surface </td></tr>
    <tr><td valign=top><em>normal</em>&nbsp;</td><td>Normal of the surface at the point </td></tr>
    <tr><td valign=top><em>dotNormalOut</em>&nbsp;</td><td>dot product of (Normal, Out) ; precalculated value </td></tr>
    <tr><td valign=top><em>dotNormalIn</em>&nbsp;</td><td>dot product of (Normal, In) ;precalculated value </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="Phong_8cpp-source.html#l00058">58</a> of file <a class="el" href="Phong_8cpp-source.html">Phong.cpp</a>.
<p>
References <a class="el" href="Phong_8hpp-source.html#l00028">Ks</a>, <a class="el" href="Vector_8hpp-source.html#l00200">Vector::SetIdealReflectedDirection()</a>, and <a class="el" href="Phong_8hpp-source.html#l00043">specularScaling</a>.
<p>
<div class="fragment"><pre>00060 {
00061         <span class="keywordflow">if</span> (dotNormalOut &lt; 0) <span class="keywordflow">return</span> Color::BLACK;
00062 
00063 <span class="comment">// add specular</span>
00064         <a class="code" href="classVector.html">Vector</a> idealReflected;
00065         idealReflected.<a class="code" href="classVector.html#a29">SetIdealReflectedDirection</a> (in, normal, dotNormalIn);
00066         <span class="keywordtype">float</span> dotProduct = idealReflected*out;
00067     <span class="keywordflow">if</span>(dotProduct &gt; 0) {        <span class="comment">// this is Lafortune's modified Phong</span>
00068                 <span class="keywordtype">float</span> scale = powf (dotProduct, Ns) * <a class="code" href="classCPhongBrdf.html#m7">specularScaling</a>;
00069 
00070                 <span class="comment">//MAXPHONG </span>
00071                 <span class="keywordtype">float</span> nDotIn = - dotNormalIn;
00072 
00073                 <span class="keywordflow">if</span>(dotNormalOut &gt; nDotIn) scale /= dotNormalOut ;
00074                 <span class="keywordflow">else</span> scale /= nDotIn;
00075 
00076                 <a class="code" href="classVector.html">Vector</a> outIdealMirror;
00077                 outIdealMirror.<a class="code" href="classVector.html#a29">SetIdealReflectedDirection</a>(-out, idealReflected);
00078                 <span class="comment">//if ( (outIdealMirror * normal)&lt;0) </span>
00079                 <span class="comment">//      scale*=2;</span>
00080                 <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m1">Ks</a>*scale;
00081         } <span class="keywordflow">else</span> {
00082                 <span class="keywordflow">return</span> Color::BLACK;
00083         }
00084 }
</pre></div>    </td>
  </tr>
</table>
<a name="a6" doxytag="CPhongBrdf::EvalSpecularBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalSpecularBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dotNormalIn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00071">71</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
References <a class="el" href="Phong_8hpp-source.html#l00070">EvalSpecularBrdf()</a>.
<p>
<div class="fragment"><pre>00071 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#a5">EvalSpecularBrdf</a>(in, out, normal, dotNormalIn, normal*out); }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="CPhongBrdf::EvalSpecularBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::EvalSpecularBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>out</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classVector.html">Vector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>normal</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
evalute the specular BRDF function for the given incoming and outgoing directions
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>in</em>&nbsp;</td><td>points TO the surface </td></tr>
    <tr><td valign=top><em>out</em>&nbsp;</td><td>points FROM the surface </td></tr>
    <tr><td valign=top><em>normal</em>&nbsp;</td><td>Normal of the surface at the point</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00070">70</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="Phong_8cpp-source.html#l00087">CalculateMaxPhongSpecularAlbedo()</a>, <a class="el" href="Phong_8hpp-source.html#l00071">EvalSpecularBrdf()</a>, <a class="el" href="StIter_8cpp-source.html#l00867">StIter::getImportance()</a>, and <a class="el" href="StIter_8cpp-source.html#l00838">StIter::getRadiance()</a>.
<p>
<div class="fragment"><pre>00070 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#a5">EvalSpecularBrdf</a>(in, out, normal, normal*in, normal*out); }
</pre></div>    </td>
  </tr>
</table>
<a name="a16" doxytag="CPhongBrdf::FinishPhong"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CPhongBrdf::FinishPhong </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
precalculate values needed for quick evaluation from primary parameters
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00091">91</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
References <a class="el" href="Vector_8hpp-source.html#l00193">Vector::Average()</a>, <a class="el" href="Phong_8cpp-source.html#l00087">CalculateMaxPhongSpecularAlbedo()</a>, <a class="el" href="globals_8hpp-source.html#l00013">M_1_PI</a>, <a class="el" href="Vector_8hpp-source.html#l00143">Vector::Normalize()</a>, <a class="el" href="globals_8hpp-source.html#l00014">PI2</a>, and <a class="el" href="Phong_8hpp-source.html#l00005">SpecularAlbedosNum</a>.
<p>
Referenced by <a class="el" href="scene_8cpp-source.html#l00204">Scene::Read()</a>.
<p>
<div class="fragment"><pre>00091                             {
00092                 <span class="comment">// calculate kd</span>
00093                 <a class="code" href="classCPhongBrdf.html#m2">kd</a> = <a class="code" href="classCPhongBrdf.html#m0">Kd</a> * <a class="code" href="globals_8hpp.html#a3">M_1_PI</a>;
00094                 <a class="code" href="classCPhongBrdf.html#m5">avgKd</a> = <a class="code" href="classCPhongBrdf.html#m0">Kd</a>.<a class="code" href="classVector.html#a28">Average</a> ();
00095                 <a class="code" href="classCPhongBrdf.html#m6">avgKs</a> = <a class="code" href="classCPhongBrdf.html#m1">Ks</a>.<a class="code" href="classVector.html#a28">Average</a> ();
00096                 <a class="code" href="classCPhongBrdf.html#m7">specularScaling</a> = (<a class="code" href="classCPhongBrdf.html#m4">Ns</a> + 2.0f) / <a class="code" href="globals_8hpp.html#a4">PI2</a>;
00097                 <a class="code" href="classCPhongBrdf.html#m8">specularPdfScaling</a> = (<a class="code" href="classCPhongBrdf.html#m4">Ns</a> + 1.0f)  / <a class="code" href="globals_8hpp.html#a4">PI2</a>;
00098                 <a class="code" href="classCPhongBrdf.html#m9">scatteredPower</a> =  <a class="code" href="classCPhongBrdf.html#m5">avgKd</a> + <a class="code" href="classCPhongBrdf.html#m6">avgKs</a>;
00099                 <a class="code" href="classCPhongBrdf.html#m3">avgBrdf</a> = <a class="code" href="classCPhongBrdf.html#m2">kd</a> + <a class="code" href="classCPhongBrdf.html#m1">Ks</a>*(1.0f/<a class="code" href="globals_8hpp.html#a4">PI2</a>);
00100 
00101                 <a class="code" href="classVector.html">Vector</a> surfaceDir(-1.0, 0.0, 0.0);
00102                 <a class="code" href="classVector.html">Vector</a> normal(0.0, 1.0, 0.0);
00103                 <span class="keywordflow">for</span> (<span class="keywordtype">short</span> i = 0; i &lt; <a class="code" href="Phong_8hpp.html#a0">SpecularAlbedosNum</a>; i++) {
00104                         
00105                         <a class="code" href="classVector.html">Vector</a> outDir;
00106                         <span class="keywordtype">float</span> a = ((float)i+0.5f) / (float)<a class="code" href="Phong_8hpp.html#a0">SpecularAlbedosNum</a>;
00107                         outDir=surfaceDir*a + normal * (1.0f - a);
00108                         outDir.<a class="code" href="classVector.html#a20">Normalize</a>();
00109                         <a class="code" href="classCPhongBrdf.html#m11">maxPhongSpecularAlbedos</a>[i] = <a class="code" href="classCPhongBrdf.html#a15">CalculateMaxPhongSpecularAlbedo</a>(outDir, normal);
00110                 }
00111 
00112         }
</pre></div>    </td>
  </tr>
</table>
<a name="a12" doxytag="CPhongBrdf::GetAlbedo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::GetAlbedo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00080">80</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
<div class="fragment"><pre>00080 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m1">Ks</a>+<a class="code" href="classCPhongBrdf.html#m0">Kd</a>; }
</pre></div>    </td>
  </tr>
</table>
<a name="a9" doxytag="CPhongBrdf::GetAverageBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::GetAverageBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00075">75</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
<div class="fragment"><pre>00075 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m3">avgBrdf</a>; };
</pre></div>    </td>
  </tr>
</table>
<a name="a10" doxytag="CPhongBrdf::GetDiffuseAlbedo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::GetDiffuseAlbedo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00077">77</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="StIter_8cpp-source.html#l00785">StIter::GenerateImportanceDirection()</a>, and <a class="el" href="StIter_8cpp-source.html#l00718">StIter::ImportanceDirectionProbability()</a>.
<p>
<div class="fragment"><pre>00077 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m0">Kd</a>; }
</pre></div>    </td>
  </tr>
</table>
<a name="a8" doxytag="CPhongBrdf::GetDiffuseBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::GetDiffuseBrdf </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00074">74</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="StIter_8cpp-source.html#l00411">StIter::DoIteration()</a>, and <a class="el" href="StIter_8cpp-source.html#l00279">StIter::SampleLightSources()</a>.
<p>
<div class="fragment"><pre>00074 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m2">kd</a>; };
</pre></div>    </td>
  </tr>
</table>
<a name="a13" doxytag="CPhongBrdf::GetReflectanceLum"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::GetReflectanceLum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00082">82</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="SelectionTree_8cpp-source.html#l00150">ImportanceTree::fillElement()</a>.
<p>
<div class="fragment"><pre>00082 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m5">avgKd</a> + <a class="code" href="classCPhongBrdf.html#m6">avgKs</a>; }
</pre></div>    </td>
  </tr>
</table>
<a name="a11" doxytag="CPhongBrdf::GetSpecularAlbedo"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::GetSpecularAlbedo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00078">78</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
<div class="fragment"><pre>00078 { <span class="keywordflow">return</span> <a class="code" href="classCPhongBrdf.html#m1">Ks</a>; }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m3" doxytag="CPhongBrdf::avgBrdf"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::avgBrdf
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
average BRDF
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00034">34</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.    </td>
  </tr>
</table>
<a name="m5" doxytag="CPhongBrdf::avgKd"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::avgKd
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
average diffuse and specular albedo
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00040">40</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.    </td>
  </tr>
</table>
<a name="m6" doxytag="CPhongBrdf::avgKs"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::avgKs
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
average diffuse and specular albedo
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00040">40</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.    </td>
  </tr>
</table>
<a name="m2" doxytag="CPhongBrdf::kd"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::kd
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
diffuse coefficient of the BRDF
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00031">31</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="Phong_8cpp-source.html#l00010">EvalBrdf()</a>, and <a class="el" href="Phong_8cpp-source.html#l00045">EvalDiffuseBrdf()</a>.    </td>
  </tr>
</table>
<a name="m0" doxytag="CPhongBrdf::Kd"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::Kd
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
diffuse albedo (kd = Kd/pi)
<p>
Kd = kd*pi or Ks = ks*2*pi/(n+2) or ks = Ks*(n+2)/(2*pi) 
<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00025">25</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="scene_8cpp-source.html#l00204">Scene::Read()</a>.    </td>
  </tr>
</table>
<a name="m1" doxytag="CPhongBrdf::Ks"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::Ks
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
specular albedo (ks = Ks*(n+2)/(2*pi))
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00028">28</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="Phong_8cpp-source.html#l00010">EvalBrdf()</a>, <a class="el" href="Phong_8cpp-source.html#l00058">EvalSpecularBrdf()</a>, and <a class="el" href="scene_8cpp-source.html#l00204">Scene::Read()</a>.    </td>
  </tr>
</table>
<a name="m11" doxytag="CPhongBrdf::maxPhongSpecularAlbedos"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::maxPhongSpecularAlbedos[SpecularAlbedosNum]
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00085">85</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="Phong_8cpp-source.html#l00114">ComputedSpecularMaxPhongAlbedo()</a>.    </td>
  </tr>
</table>
<a name="m4" doxytag="CPhongBrdf::Ns"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::Ns
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
specular exponent
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00037">37</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="StIter_8cpp-source.html#l00664">StIter::CalculateSpecularDirectionProbability()</a>, <a class="el" href="StIter_8cpp-source.html#l00679">StIter::GenerateSpecularDirection()</a>, and <a class="el" href="scene_8cpp-source.html#l00204">Scene::Read()</a>.    </td>
  </tr>
</table>
<a name="m9" doxytag="CPhongBrdf::scatteredPower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::scatteredPower
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
pre-processed values
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00043">43</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.    </td>
  </tr>
</table>
<a name="m10" doxytag="CPhongBrdf::specularMaxPhongScaling"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classVector.html">Color</a> CPhongBrdf::specularMaxPhongScaling
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00084">84</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.    </td>
  </tr>
</table>
<a name="m8" doxytag="CPhongBrdf::specularPdfScaling"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::specularPdfScaling
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
pre-processed values
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00043">43</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="StIter_8cpp-source.html#l00664">StIter::CalculateSpecularDirectionProbability()</a>, and <a class="el" href="StIter_8cpp-source.html#l00679">StIter::GenerateSpecularDirection()</a>.    </td>
  </tr>
</table>
<a name="m7" doxytag="CPhongBrdf::specularScaling"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float CPhongBrdf::specularScaling
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
pre-processed values
<p>

<p>
Definition at line <a class="el" href="Phong_8hpp-source.html#l00043">43</a> of file <a class="el" href="Phong_8hpp-source.html">Phong.hpp</a>.
<p>
Referenced by <a class="el" href="Phong_8cpp-source.html#l00010">EvalBrdf()</a>, and <a class="el" href="Phong_8cpp-source.html#l00058">EvalSpecularBrdf()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Phong_8hpp-source.html">Phong.hpp</a><li><a class="el" href="Phong_8cpp-source.html">Phong.cpp</a></ul>
<hr><address style="align: right;"><small>Generated on Tue Feb 18 18:30:43 2003 for Stochastic Iteration for Non-diffuse Global Illumination by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc2 </small></address>
</body>
</html>
